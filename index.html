<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>병원 스케줄 관리 시스템</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏥 병원 스케줄 관리 시스템</h1>
            <button class="help-btn" onclick="showLegendModal()" title="색상 설명">?</button>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="patient-form">
                    <h3>새 환자 등록</h3>
                    <div class="form-group">
                        <label>환자명</label>
                        <input type="text" id="patientName" placeholder="환자명">
                    </div>
                    <div class="form-group">
                        <label>성별</label>
                        <select id="patientGender">
                            <option value="male">남성</option>
                            <option value="female">여성</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>진료과/상태</label>
                        <select id="patientCondition">
                            <option value="암">암</option>
                            <option value="재활">재활</option>
                            <option value="일반">일반</option>
                            <option value="수술">수술</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>입원 시작일</label>
                        <input type="date" id="admissionDate">
                    </div>
                    <div class="form-group">
                        <label>입원 종료일 / 기간</label>
                        <div class="duration-row">
                            <input type="date" id="dischargeDate" onchange="updateDurationFromDischarge()">
                            <select id="duration" onchange="updateDischargeFromDuration()">
                                <option value="">기간</option>
                                <option value="1">1일</option>
                                <option value="2">2일</option>
                                <option value="3">3일</option>
                                <option value="4">4일</option>
                                <option value="5">5일</option>
                                <option value="6">6일</option>
                                <option value="7">7일</option>
                                <option value="8">8일</option>
                                <option value="9">9일</option>
                                <option value="10">10일</option>
                                <option value="11">11일</option>
                                <option value="12">12일</option>
                                <option value="13">13일</option>
                                <option value="14" selected>14일</option>
                                <option value="15">15일</option>
                                <option value="16">16일</option>
                                <option value="17">17일</option>
                                <option value="18">18일</option>
                                <option value="19">19일</option>
                                <option value="20">20일</option>
                                <option value="21">21일</option>
                                <option value="30">30일</option>
                                <option value="45">45일</option>
                                <option value="60">60일</option>
                            </select>
                        </div>
                        <div class="longterm-container">
                            <label class="longterm-label" for="longtermCheck">장기입원 (퇴원일 미정)</label>
                            <input type="checkbox" class="longterm-checkbox" id="longtermCheck" onchange="toggleLongterm()">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>병실타입</label>
                        <select id="roomType">
                            <option value="any">상관없음</option>
                            <option value="1인실">1인실</option>
                            <option value="2인실">2인실</option>
                            <option value="4인실">4인실</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>특이사항</label>
                        <textarea id="patientNotes" placeholder="알레르기, 특별 요구사항 등"></textarea>
                    </div>
                    <button class="btn" onclick="findRecommendations()">병실 추천받기</button>
                    <button class="btn btn-secondary" onclick="addPatient()">환자 등록</button>
                </div>
                
                <div id="recommendations" style="display: none;"></div>
            </div>

            <div class="schedule-area">
                <div class="schedule-header">
                    <div class="date-nav">
                        <button class="nav-btn" onclick="moveDate(-10)" title="10일 이전">&lt;&lt;</button>
                        <button class="nav-btn" onclick="moveDate(-1)" title="1일 이전">&lt;</button>
                        <span class="date-range" id="dateRange"></span>
                        <button class="nav-btn" onclick="moveDate(1)" title="1일 이후">&gt;</button>
                        <button class="nav-btn" onclick="moveDate(10)" title="10일 이후">&gt;&gt;</button>
                    </div>
                </div>

                <div class="schedule-container">
                    <div class="schedule-table-wrapper">
                        <table class="schedule-table" id="scheduleTable">
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="legend-modal" id="legendModal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeLegendModal()">&times;</span>
            <h3>색상 설명</h3>
            <div class="legend">
                <div class="legend-section">
                    <h4>점유율</h4>
                    <div class="legend-item">
                        <div class="legend-color occupancy-0-male"></div>
                        <span>빈 병실</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color occupancy-50-male"></div>
                        <span>부분 점유 (빗금)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color occupancy-100-male"></div>
                        <span>만실 (남성)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color occupancy-100-female"></div>
                        <span>만실 (여성)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color status-reserved-demo-male"></div>
                        <span>예약 환자 (남성)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color status-reserved-demo-female"></div>
                        <span>예약 환자 (여성)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color mixed-status-demo"></div>
                        <span>혼합 상태 (입원+예약)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="patient-modal" id="patientModal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <div class="patient-detail-modal" id="patientDetailModal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closePatientDetailModal()">&times;</span>
            <div id="patientDetailBody"></div>
        </div>
    </div>

    <div class="date-summary-modal" id="dateSummaryModal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeDateSummaryModal()">&times;</span>
            <div id="dateSummaryBody"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
